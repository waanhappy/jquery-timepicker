{"version":3,"sources":["timepicker.js"],"names":["root","factory","define","amd","exports","module","require","$","jQuery","this","twobit","num","regTime","timepicker","nullFun","hourStr","Array","fill","map","t","i","val","join","minuteStr","content","find","attr","title","choseAll","choseMinute","choseHour","hourShow","minuteShow","update","inputTarget","hour","minute","text","$timepickerUpdate","bindEvent","thisTimePicker","hasBind","on","getAttribute","hide","show","e","stopPropagation","fn","option","timepickerObj","$body","nodeName","off","value","test","split","Date","getHours","getMinutes","left","offsetLeft","top","offsetTop","offsetHeight","appendTo","offsetParent","css","one","remove","fun","isFunction"],"mappings":"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","file":"../js/timepicker.min.js","sourcesContent":["/*!\n * @todo 日期选择器  \n * @author wanhappy@163.com\n * 使用方法 $('input').timepicker(); \n**/\n ;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require('jquery'));\n  } else {\n    root.$ = factory(root.jQuery);\n  }\n}(this, function($) {\n\r\n'use strict';\r\n\r\n// 单个位数前加0  \r\nvar twobit = function( num ) {\r\n\treturn num >= 10 ? num + '' : '0' + num;\r\n};\r\n// 检测时间是否符合要求\r\nvar regTime = /^[0-9]{1,2}:[0-9]{1,2}$/;\r\nvar timepicker = {};\r\n\r\n// 空函数\r\nvar nullFun = function () {};\r\n\r\n// 小时\r\nvar hourStr = new Array( 24 ).fill( null ).map(function(t,i){\r\n\tvar val = twobit( i ); \r\n\treturn '<li class=\"cell-2 js-hour-cell\" data-val=\"' + val + '\">' + val + '</li>';\r\n}).join('');\r\n\r\n// 分钟\r\nvar minuteStr = new Array( 12 ).fill( null ).map(function(t,i){\r\n\tvar val = twobit( i *5 ); \r\n\treturn  '<li class=\"cell-2 js-minute-cell\" data-val=\"' + val + '\">' + val + '</li>';\r\n}).join('');\r\n\r\nvar content = $('<div class=\"timepicker\">\\\r\n\t\t<div v-show class=\"title\">请选择</div>\\\r\n\t\t\t<div class=\"chose-all\">\\\r\n\t\t\t\t<div class=\"handle\">\\\r\n\t\t\t\t\t<div class=\"cell-4\"><a class=\"icon-up js-plus-houer\"></a></div>\\\r\n\t\t\t\t\t<div class=\"cell-2\"></div>\\\r\n\t\t\t\t\t<div class=\"cell-4\"><a class=\"icon-up js-plus-minute\"></a></div>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t\t<div class=\"text\">\\\r\n\t\t\t\t\t<div class=\"cell-4\"><a class=\"js-hour-show\" title=\"选择时\"></a></div>\\\r\n\t\t\t\t\t<div class=\"cell-2\">:</div>\\\r\n\t\t\t\t\t<div class=\"cell-4\"><a class=\"js-minute-show\" title=\"选择分\"></a></div>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t\t<div class=\"handle\">\\\r\n\t\t\t\t\t<div class=\"cell-4\"><a class=\"icon-down js-minus-houer\"></a></div>\\\r\n\t\t\t\t\t<div class=\"cell-2\"></div>\\\r\n\t\t\t\t\t<div class=\"cell-4\"><a class=\"icon-down js-minus-minute\"></a></div>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t</div>\\\r\n\t\t\t<div class=\"chose-hour\">\\\r\n\t\t\t\t<ul class=\"handle\">' + hourStr + '</ul>\\\r\n\t\t\t</div>\\\r\n\t\t\t<div class=\"chose-minute\">\\\r\n\t\t\t\t<ul class=\"handle\">' + minuteStr + '</ul>\\\r\n\t\t\t</div>\\\r\n\t\t</div>\\\r\n\t</div>');\r\ncontent.find('a').attr('href','javascript:void(0);');\r\ntimepicker.content = content;\r\ntimepicker.title = content.find('.title');\r\ntimepicker.choseAll = content.find('.chose-all');\r\ntimepicker.choseMinute = content.find('.chose-minute');\r\ntimepicker.choseHour = content.find('.chose-hour');\r\ntimepicker.hourShow = content.find('.js-hour-show');\r\ntimepicker.minuteShow = content.find('.js-minute-show');\r\n\r\n// 更新时间\r\ntimepicker.update = function () {\r\n\tthis.inputTarget.val( twobit( this.hour ) + ':' + twobit( this.minute ) );\r\n\tthis.minuteShow.text( twobit( this.minute ) );\r\n\tthis.hourShow.text( twobit( this.hour ) );\r\n\tthis.inputTarget.$timepickerUpdate();\r\n\treturn this;\r\n};\r\n\r\n// 事件绑定\r\ntimepicker.bindEvent = function () {\r\n\tvar thisTimePicker = this;\r\n\tif( thisTimePicker.hasBind ) return;\r\n\tthisTimePicker.hasBind = true;\r\n\t// 分钟--\r\n\tthis.content.on('click','.js-minus-minute',function() {\r\n\t\tvar minute = thisTimePicker.minute;\r\n\t\tif( minute <= 0 ){\r\n\t\t\tthisTimePicker.minute = 59;\r\n\t\t} else {\r\n\t\t\tthisTimePicker.minute--;\r\n\t\t}\r\n\t\tthisTimePicker.update();\r\n\t\r\n\t// 分钟++\r\n\t}).on('click','.js-plus-minute',function() {\r\n\t\tvar minute = thisTimePicker.minute;\r\n\t\tif( minute >= 59 ){\r\n\t\t\tthisTimePicker.minute = 0;\r\n\t\t} else {\r\n\t\t\tthisTimePicker.minute++;\r\n\t\t}\r\n\r\n\t\tthisTimePicker.update();\r\n\t// \r\n\t// 小时++\r\n\t}).on('click','.js-plus-houer',function() {\r\n\t\tvar hour = thisTimePicker.hour;\r\n\t\tif( hour >= 23 ){\r\n\t\t\tthisTimePicker.hour = 0;\r\n\t\t} else {\r\n\t\t\tthisTimePicker.hour++;\r\n\t\t}\r\n\t\tthisTimePicker.update();\r\n\t\r\n\t// 小时--\r\n\t}).on('click','.js-minus-houer',function() {\r\n\t\tvar hour = thisTimePicker.hour;\r\n\t\tif( hour <= 0 ){\r\n\t\t\tthisTimePicker.hour = 23;\r\n\t\t} else {\r\n\t\t\tthisTimePicker.hour--;\r\n\t\t}\r\n\t\tthisTimePicker.update();\r\n\t\r\n\t// 选择分钟\r\n\t}).on('click','.js-minute-cell',function () {\r\n\t\tthisTimePicker.minute = +this.getAttribute('data-val');\r\n\t\tthisTimePicker.update();\r\n\t\tthisTimePicker.choseMinute.hide();\r\n\t\tthisTimePicker.choseAll.show();\r\n\t\tthisTimePicker.title.text('请选择');\r\n\t\r\n\t// 选择小时\r\n\t}).on('click','.js-hour-cell',function () {\r\n\t\tthisTimePicker.hour = +this.getAttribute('data-val');\r\n\t\tthisTimePicker.update();\r\n\t\tthisTimePicker.choseHour.hide();\r\n\t\tthisTimePicker.choseAll.show();\r\n\t\tthisTimePicker.title.text('请选择');\r\n\t// 阻止冒泡\r\n\t}).on('click',function(e) {\r\n\t\te.stopPropagation();\r\n\t});\r\n\r\n\t// 切换到选择小时\r\n\tthisTimePicker.hourShow.on('click',function() {\r\n\t\tthisTimePicker.choseAll.hide();\r\n\t\tthisTimePicker.choseHour.show();\r\n\t\tthisTimePicker.title.text('请选择小时');\r\n\t});\r\n\r\n\t// 切换到选择分钟\r\n\tthisTimePicker.minuteShow.on('click',function() {\r\n\t\tthisTimePicker.choseAll.hide();\r\n\t\tthisTimePicker.choseMinute.show();\r\n\t\tthisTimePicker.title.text('请选择分钟');\r\n\t});\r\n};\r\n\r\n// 将时间选择对象挂载到$上\r\n$.timepicker = timepicker;\r\n\r\n// 为jquery增加timepicket功能\r\n$.fn.timepicker = function( option ) {\r\n\tvar t = this;\r\n\tvar hour;\r\n\tvar minute;\r\n\tvar timepickerObj = $.timepicker;\r\n\tvar $body = $('html');\r\n\t\r\n\t// 元素应该是input\r\n\tif( !this[0].nodeName || this[0].nodeName !== 'INPUT' ){\r\n\t\treturn;\r\n\t}\r\n\t// 防止报错\r\n\tthis.$timepickerUpdate = nullFun;\r\n\t\r\n\t// 事件绑定\r\n\tthis.off('click').on('click',function(e) {\r\n\t\tvar val = this.value;\r\n\t\tif( regTime.test( val ) ){\r\n\t\t\tval = val.split(':');\r\n\t\t\thour = +val[0];\r\n\t\t\tminute = +val[1];\r\n\t\t} else {\r\n\t\t\tval = new Date();\r\n\t\t\thour = val.getHours();\r\n\t\t\tminute = val.getMinutes();\r\n\t\t}\r\n\t\tvar left = this.offsetLeft + 'px';\r\n\t\tvar top = ( this.offsetTop + this.offsetHeight ) + 'px';\r\n\t\t\r\n\t\ttimepickerObj.inputTarget = t;\r\n\t\ttimepickerObj.content.appendTo( this.offsetParent ).css( { left : left, top : top } );\r\n\t\ttimepickerObj.hour = hour;\r\n\t\ttimepickerObj.minute = minute;\r\n\t\ttimepickerObj.choseAll.show();\r\n\t\ttimepickerObj.choseHour.hide();\r\n\t\ttimepickerObj.choseMinute.hide();\r\n\t\ttimepickerObj.update();\r\n\t\t$.timepicker.bindEvent();\r\n\t\te.stopPropagation();\r\n\t\t$body.one('click',function() {\r\n\t\t\ttimepickerObj.content.off().remove();\r\n\t\t\ttimepickerObj.hasBind = false;\r\n\t\t});\r\n\t});\r\n\tthis.off('keydown').on('keydown',function() {\r\n\t\treturn false;\r\n\t});\r\n\tthis.update = function( fun ) {\r\n\t\tif( $.isFunction( fun ) ) this.$timepickerUpdate = fun;\r\n\t\telse this.$timepickerUpdate = nullFun;\r\n\t};\r\n\treturn this;\r\n};\r\n\r\n\nreturn $;\n}));\n "]}